<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>移动端一像素问题与解决方案</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        /* 给需要加 1px 边框的元素，通过::after/::before伪元素生成一个「1px 的占位边框层」，再通过 transform: scale(0.5) 把这个伪元素缩小到原来的 1/2，刚好匹配 Retina 屏 DPR=2 的物理像素，视觉上就是「真实的 1px 细边框」。 */
        /* 给需要1px下边框的元素加这个类名即可，面试最常考这个 */
        .border-1px-bottom {
            position: relative;
        }

        .border-1px-bottom::after {
            content: "";
            position: absolute;
            left: 0;
            bottom: 0;
            width: 100%;
            height: 1px;
            /* 伪元素的基础1px */
            background-color: #e5e5e5;
            /* 边框颜色 */
            transform: scaleY(0.5);
            /* 垂直方向缩放0.5倍 */
            transform-origin: left bottom;
            /* 缩放原点，防止偏移 */
        }
    </style>
</head>

<body>
    <div class="wrap">
        <h2>一像素问题：为什么 1px 在手机上看起来更粗？</h2>
        <p style="color:#555; line-height:1.8;">
            原因：移动设备的设备像素比（DPR）大于 1，CSS 像素与物理像素不是 1:1。<br>
            例如 iPhone DPR=2 时，1 个 CSS 像素会映射到 2 个物理像素，导致 1px 线看起来更粗。目标是“在高 DPR 设备上实现视觉上真正的 1 物理像素线”（俗称发丝线）。
        </p>
        <p>给需要加 1px 边框的元素，通过::after/::before伪元素生成一个「1px 的占位边框层」，再通过 transform: scale(0.5) 把这个伪元素缩小到原来的 1/2，刚好匹配 Retina 屏
            DPR=2 的物理像素，视觉上就是「真实的 1px 细边框」。</p>

    </div>
</body>

<script>
    // 动态计算DPR，设置viewport缩放比例，适配所有手机
    const dpr = window.devicePixelRatio || 1;
    const meta = document.createElement('meta');
    meta.name = 'viewport';
    meta.content = `width=device-width, initial-scale=${1 / dpr}, maximum-scale=${1 / dpr}, minimum-scale=${1 / dpr}, user-scalable=no`;
    document.head.appendChild(meta);
</script>

</html>